#!/usr/bin/env bash

# rebuilds .dockerignore and whitelists abritrary directories
make-dockerignore() {
    local f=$ROOT/.dockerignore

    echo "### ------ DO NOT EDIT THIS FILE ------- ###" > $f
    echo "#                                          #" >> $f
    echo "#     edit common.dockerignore instead     #" >> $f
    echo "#                                          #" >> $f
    echo "### ------------------------------------- ##" >> $f
    echo >> $f

    cat $ROOT/.common.dockerignore >> $f
    echo >> $f

    for project_dir in "$@"
    do
        echo "!/$project_dir" >> $f
    done

    echo
}